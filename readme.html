<html>
<head><meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<style type="text/css">
<!--
span.cls_002{font-family:Arial,serif;font-size:27.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_002{font-family:Arial,serif;font-size:27.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_003{font-family:Arial,serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_003{font-family:Arial,serif;font-size:12.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_004{font-family:Arial,serif;font-size:12.1px;color:rgb(51,51,51);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_004{font-family:Arial,serif;font-size:12.1px;color:rgb(51,51,51);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_005{font-family:Arial,serif;font-size:12.1px;color:rgb(51,51,51);font-weight:normal;font-style:italic;text-decoration: none}
div.cls_005{font-family:Arial,serif;font-size:12.1px;color:rgb(51,51,51);font-weight:normal;font-style:italic;text-decoration: none}
span.cls_006{font-family:Arial,serif;font-size:21.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_006{font-family:Arial,serif;font-size:21.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_007{font-family:Arial,serif;font-size:12.1px;color:rgb(0,135,204);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_007{font-family:Arial,serif;font-size:12.1px;color:rgb(0,135,204);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_008{font-family:Arial,serif;font-size:18.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_008{font-family:Arial,serif;font-size:18.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_009{font-family:Courier New,serif;font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_009{font-family:Courier New,serif;font-size:10.3px;color:rgb(0,0,0);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_010{font-family:Arial,serif;font-size:15.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
div.cls_010{font-family:Arial,serif;font-size:15.1px;color:rgb(0,0,0);font-weight:bold;font-style:normal;text-decoration: none}
span.cls_011{font-family:Courier New,serif;font-size:10.3px;color:rgb(120,92,162);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_011{font-family:Courier New,serif;font-size:10.3px;color:rgb(120,92,162);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_012{font-family:Courier New,serif;font-size:10.3px;color:rgb(51,51,51);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_012{font-family:Courier New,serif;font-size:10.3px;color:rgb(51,51,51);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_013{font-family:Courier New,serif;font-size:10.3px;color:rgb(149,152,149);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_013{font-family:Courier New,serif;font-size:10.3px;color:rgb(149,152,149);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_014{font-family:"Trebuchet MS",serif;font-size:12.1px;color:rgb(51,51,51);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_014{font-family:"Trebuchet MS",serif;font-size:12.1px;color:rgb(51,51,51);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_015{font-family:Courier New,serif;font-size:10.3px;color:rgb(166,28,92);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_015{font-family:Courier New,serif;font-size:10.3px;color:rgb(166,28,92);font-weight:normal;font-style:normal;text-decoration: none}
span.cls_016{font-family:Courier New,serif;font-size:10.3px;color:rgb(0,134,179);font-weight:normal;font-style:normal;text-decoration: none}
div.cls_016{font-family:Courier New,serif;font-size:10.3px;color:rgb(0,134,179);font-weight:normal;font-style:normal;text-decoration: none}
-->
</style>
<script type="text/javascript" src="readme_files/wz_jsgraphics.js"></script>
</head>
<body>
<div style="position:absolute;left:50%;margin-left:-297px;top:0px;width:594px;height:840px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="readme_files/background1.jpg" width=594 height=840></div>
<div style="position:absolute;left:28.00px;top:59.29px" class="cls_002"><span class="cls_002">CSC 3150 Project 3 Report</span></div>
<div style="position:absolute;left:28.00px;top:114.79px" class="cls_003"><span class="cls_003">Zhu Chuyan</span><span class="cls_004"> 119010486 </span><span class="cls_003">at</span><span class="cls_004"> </span><span class="cls_005">The Chinese University of Hong Kong, Shenzhen</span></div>
<div style="position:absolute;left:28.00px;top:152.29px" class="cls_006"><span class="cls_006">Table of contents</span></div>
<div style="position:absolute;left:52.00px;top:197.29px" class="cls_007"><span class="cls_007">CSC 3150 Project 3 Report</span></div>
<div style="position:absolute;left:76.00px;top:216.04px" class="cls_007"><span class="cls_007">Table of contents</span></div>
<div style="position:absolute;left:76.00px;top:234.79px" class="cls_007"><span class="cls_007">1. How to run the program</span></div>
<div style="position:absolute;left:100.00px;top:253.54px" class="cls_007"><span class="cls_007">1.1 Running environments</span></div>
<div style="position:absolute;left:100.00px;top:272.29px" class="cls_007"><span class="cls_007">1.2 Executions</span></div>
<div style="position:absolute;left:124.00px;top:291.04px" class="cls_007"><span class="cls_007">Main task: Single Process VM Simulation</span></div>
<div style="position:absolute;left:124.00px;top:309.79px" class="cls_007"><span class="cls_007">Bonus: Multiple Process VM Simulation</span></div>
<div style="position:absolute;left:76.00px;top:328.54px" class="cls_007"><span class="cls_007">2. Implementations</span></div>
<div style="position:absolute;left:100.00px;top:347.29px" class="cls_007"><span class="cls_007">2.1 Single Process VM Simulation</span></div>
<div style="position:absolute;left:124.00px;top:366.04px" class="cls_007"><span class="cls_007">Inverted Tables</span></div>
<div style="position:absolute;left:124.00px;top:384.79px" class="cls_007"><span class="cls_007">Table Searching</span></div>
<div style="position:absolute;left:124.00px;top:403.54px" class="cls_007"><span class="cls_007">LRU Policy Implementations</span></div>
<div style="position:absolute;left:124.00px;top:422.29px" class="cls_007"><span class="cls_007">Memory Layouts</span></div>
<div style="position:absolute;left:100.00px;top:441.04px" class="cls_007"><span class="cls_007">2.2 Multiple Process VM Simulation</span></div>
<div style="position:absolute;left:76.00px;top:459.79px" class="cls_007"><span class="cls_007">3. The results</span></div>
<div style="position:absolute;left:100.00px;top:478.54px" class="cls_007"><span class="cls_007">Single Process VM Simulation</span></div>
<div style="position:absolute;left:100.00px;top:497.29px" class="cls_007"><span class="cls_007">My User Program</span></div>
<div style="position:absolute;left:100.00px;top:516.04px" class="cls_007"><span class="cls_007">Multiple Processes VM Simulation (bonus)</span></div>
<div style="position:absolute;left:76.00px;top:534.79px" class="cls_007"><span class="cls_007">4. What I learn from the project</span></div>
<div style="position:absolute;left:28.00px;top:572.29px" class="cls_006"><span class="cls_006">1. How to run the program</span></div>
<div style="position:absolute;left:28.00px;top:621.79px" class="cls_008"><span class="cls_008">1.1 Running environments</span></div>
<div style="position:absolute;left:52.00px;top:657.04px" class="cls_004"><span class="cls_004">Operating system: </span><span class="cls_009"> Linux</span></div>
<div style="position:absolute;left:52.00px;top:675.79px" class="cls_004"><span class="cls_004">Linux distribution: </span><span class="cls_009"> CentOS Linux release 7.6.1810 (Core)</span></div>
<div style="position:absolute;left:52.00px;top:694.54px" class="cls_004"><span class="cls_004">Linux kernel version: </span><span class="cls_009"> Linux version 3.10.0-957.21.3.el7.x86_64</span></div>
<div style="position:absolute;left:52.00px;top:713.29px" class="cls_004"><span class="cls_004">Compiler/CUDA version: </span><span class="cls_009"> Cuda compilation tools, release 10.1, V10.1.105</span></div>
<div style="position:absolute;left:28.00px;top:747.79px" class="cls_008"><span class="cls_008">1.2 Executions</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:850px;width:594px;height:840px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="readme_files/background2.jpg" width=594 height=840></div>
<div style="position:absolute;left:28.00px;top:33.04px" class="cls_010"><span class="cls_010">Main task: Single Process VM Simulation</span></div>
<div style="position:absolute;left:28.00px;top:64.54px" class="cls_004"><span class="cls_004">A Makefle has been prepared, so you can compile with the following command:</span></div>
<div style="position:absolute;left:36.16px;top:102.34px" class="cls_011"><span class="cls_011">cd</span><span class="cls_012"> path_to_project/source/</span></div>
<div style="position:absolute;left:36.16px;top:116.59px" class="cls_011"><span class="cls_011">make</span></div>
<div style="position:absolute;left:28.00px;top:152.29px" class="cls_004"><span class="cls_004">You can then test the program by executing</span></div>
<div style="position:absolute;left:36.16px;top:190.09px" class="cls_012"><span class="cls_012">./vm</span></div>
<div style="position:absolute;left:28.00px;top:227.29px" class="cls_010"><span class="cls_010">Bonus: Multiple Process VM Simulation</span></div>
<div style="position:absolute;left:36.16px;top:265.09px" class="cls_011"><span class="cls_011">cd</span><span class="cls_012"> path_to_project/bonus/</span></div>
<div style="position:absolute;left:36.16px;top:279.34px" class="cls_011"><span class="cls_011">make</span></div>
<div style="position:absolute;left:36.16px;top:293.59px" class="cls_013"><span class="cls_013"># if you wish to clean the object files:</span></div>
<div style="position:absolute;left:36.16px;top:307.84px" class="cls_011"><span class="cls_011">make</span><span class="cls_012"> clean</span></div>
<div style="position:absolute;left:28.00px;top:343.54px" class="cls_004"><span class="cls_004">Then you can simply run by:</span></div>
<div style="position:absolute;left:36.16px;top:381.34px" class="cls_012"><span class="cls_012">./vm_bonus</span></div>
<div style="position:absolute;left:28.00px;top:423.79px" class="cls_006"><span class="cls_006">2. Implementations</span></div>
<div style="position:absolute;left:28.00px;top:472.54px" class="cls_008"><span class="cls_008">2.1 Single Process VM Simulation</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:1700px;width:594px;height:840px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="readme_files/background3.jpg" width=594 height=840></div>
<div style="position:absolute;left:232.70px;top:48.04px" class="cls_014"><span class="cls_014">Virtual Memory</span></div>
<div style="position:absolute;left:99.29px;top:93.04px" class="cls_014"><span class="cls_014">Search Entry</span></div>
<div style="position:absolute;left:82.75px;top:138.04px" class="cls_014"><span class="cls_014">P2V Inverted Table</span></div>
<div style="position:absolute;left:217.32px;top:138.04px" class="cls_014"><span class="cls_014">Find VM Before Swap   Search Disk Addr to Swap in/out</span></div>
<div style="position:absolute;left:88.65px;top:183.04px" class="cls_014"><span class="cls_014">Index Mapped to</span></div>
<div style="position:absolute;left:159.20px;top:228.04px" class="cls_014"><span class="cls_014">Physical Memory</span></div>
<div style="position:absolute;left:367.99px;top:228.04px" class="cls_014"><span class="cls_014">Swap File Inverted Table</span></div>
<div style="position:absolute;left:129.80px;top:273.04px" class="cls_014"><span class="cls_014">Swapped to (Based on LRU)</span></div>
<div style="position:absolute;left:411.83px;top:273.04px" class="cls_014"><span class="cls_014">Do swap</span></div>
<div style="position:absolute;left:252.85px;top:318.04px" class="cls_014"><span class="cls_014">2nd Storage</span></div>
<div style="position:absolute;left:161.08px;top:355.54px" class="cls_004"><span class="cls_004">Figure 1: Main Program Implementation Flow Chart</span></div>
<div style="position:absolute;left:28.00px;top:387.79px" class="cls_010"><span class="cls_010">Inverted Tables</span></div>
<div style="position:absolute;left:28.00px;top:419.29px" class="cls_004"><span class="cls_004">First of all, we need a page table for physical memory-virtual memory mapping. Due to the limitation</span></div>
<div style="position:absolute;left:28.00px;top:438.04px" class="cls_004"><span class="cls_004">of memory space, an inverted table is needed to implement.</span></div>
<div style="position:absolute;left:28.00px;top:468.79px" class="cls_004"><span class="cls_004">The entry of the table is the virtual memory address (page address, page ofset excluded), and the</span></div>
<div style="position:absolute;left:28.00px;top:487.54px" class="cls_004"><span class="cls_004">index of the table is the physical memory address, therefore, there will be in total 1024 entries as</span></div>
<div style="position:absolute;left:28.00px;top:506.29px" class="cls_004"><span class="cls_004">there are 1024 pages in the physical memory according to the given assumption.</span></div>
<div style="position:absolute;left:28.00px;top:537.04px" class="cls_004"><span class="cls_004">As the upper limit of the VM address space is 256K, larger than the secondary storage size,</span></div>
<div style="position:absolute;left:28.00px;top:555.79px" class="cls_004"><span class="cls_004">therefore, I did not adopt the one-to-one mapping between the swap fle location and the VM</span></div>
<div style="position:absolute;left:28.00px;top:574.54px" class="cls_004"><span class="cls_004">address, instead, another inverted table is introduced to record the relationship.</span></div>
<div style="position:absolute;left:28.00px;top:606.79px" class="cls_010"><span class="cls_010">Table Searching</span></div>
<div style="position:absolute;left:28.00px;top:638.29px" class="cls_004"><span class="cls_004">As yet another time-space tradeof, the inverted table requires us to search for the specifc VM</span></div>
<div style="position:absolute;left:28.00px;top:657.04px" class="cls_004"><span class="cls_004">address, and it may takes time complexity of O(n), which is quite inefcient. Therefore, a hashing</span></div>
<div style="position:absolute;left:28.00px;top:675.79px" class="cls_004"><span class="cls_004">method may help to improve the performance.</span></div>
<div style="position:absolute;left:28.00px;top:694.54px" class="cls_004"><span class="cls_004">However, the hashing result may generate outputs confiting with the LRU policy when the page</span></div>
<div style="position:absolute;left:28.00px;top:714.04px" class="cls_004"><span class="cls_004">table is full, therefore, a linear search will be adopted in my program </span><span class="cls_003">after the table is full</span><span class="cls_004">. Before</span></div>
<div style="position:absolute;left:28.00px;top:732.79px" class="cls_004"><span class="cls_004">that, a open-addressing hashing method is used. All entries are frstly marked as invalid, and the</span></div>
<div style="position:absolute;left:28.00px;top:751.54px" class="cls_004"><span class="cls_004">linear probing process will terminate whenever it encounters a invalid entry or fnds a desired entry.</span></div>
<div style="position:absolute;left:28.00px;top:783.79px" class="cls_010"><span class="cls_010">LRU Policy Implementations</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:2550px;width:594px;height:840px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="readme_files/background4.jpg" width=594 height=840></div>
<div style="position:absolute;left:28.00px;top:34.54px" class="cls_004"><span class="cls_004">I implemented LRU with a doubly linked list to reduce the searching time, for each entry in the</span></div>
<div style="position:absolute;left:28.00px;top:53.29px" class="cls_004"><span class="cls_004">inverted page table, there is a pointer pointing to the previous and next entries in term of latest</span></div>
<div style="position:absolute;left:28.00px;top:72.04px" class="cls_004"><span class="cls_004">visiting time (like a priority queue).</span></div>
<div style="position:absolute;left:28.00px;top:102.79px" class="cls_004"><span class="cls_004">Each time a memory address (physical) is accessed, the corresponding node will be moved to the</span></div>
<div style="position:absolute;left:28.00px;top:121.54px" class="cls_004"><span class="cls_004">head of the linked list, a each time a victim is to be selected to evict, it will be the tail of the node.</span></div>
<div style="position:absolute;left:28.00px;top:153.79px" class="cls_010"><span class="cls_010">Memory Layouts</span></div>
<div style="position:absolute;left:28.00px;top:185.29px" class="cls_004"><span class="cls_004">As only 16KB memory is avaible for all tables and related records, the memory is quite compacted to</span></div>
<div style="position:absolute;left:28.00px;top:204.04px" class="cls_004"><span class="cls_004">fulflls the designing ideas mentioned above, therefore, the memory layout is shown as below and</span></div>
<div style="position:absolute;left:28.00px;top:222.79px" class="cls_004"><span class="cls_004">dozens of macros are written to facilitate the use.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:3400px;width:594px;height:840px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="readme_files/background5.jpg" width=594 height=840></div>
<div style="position:absolute;left:28.00px;top:34.54px" class="cls_004"><span class="cls_004">The componenents are elaborated as follows:</span></div>
<div style="position:absolute;left:52.00px;top:65.29px" class="cls_004"><span class="cls_004">VA: Valid bit</span></div>
<div style="position:absolute;left:52.00px;top:84.04px" class="cls_004"><span class="cls_004">DIRT: Dirty bit</span></div>
<div style="position:absolute;left:52.00px;top:102.79px" class="cls_004"><span class="cls_004">PID: the pid of the program (applicable in bonus)</span></div>
<div style="position:absolute;left:52.00px;top:121.54px" class="cls_004"><span class="cls_004">Virtual Page: the corresponding virtual page number</span></div>
<div style="position:absolute;left:52.00px;top:140.29px" class="cls_004"><span class="cls_004">Head_node: the head node of the linked list</span></div>
<div style="position:absolute;left:52.00px;top:159.04px" class="cls_004"><span class="cls_004">Tail_node: the tail node of the linked list</span></div>
<div style="position:absolute;left:52.00px;top:177.79px" class="cls_004"><span class="cls_004">PREV: Previous node in the linked list</span></div>
<div style="position:absolute;left:52.00px;top:196.54px" class="cls_004"><span class="cls_004">NEXT: Next node in the linked list</span></div>
<div style="position:absolute;left:52.00px;top:215.29px" class="cls_004"><span class="cls_004">PN: The previous node is null</span></div>
<div style="position:absolute;left:52.00px;top:234.04px" class="cls_004"><span class="cls_004">NN: The next node is null</span></div>
<div style="position:absolute;left:28.00px;top:264.79px" class="cls_004"><span class="cls_004">Note that in the Pysical-memory-to-VM inverted table, each entry occupies two 32-bit block and in</span></div>
<div style="position:absolute;left:28.00px;top:283.54px" class="cls_004"><span class="cls_004">the Secondary-storage-to-VM inverted table, each entry occupies half 32-bit block.</span></div>
<div style="position:absolute;left:28.00px;top:318.04px" class="cls_008"><span class="cls_008">2.2 Multiple Process VM Simulation</span></div>
<div style="position:absolute;left:28.00px;top:353.29px" class="cls_004"><span class="cls_004">The multiple process simulation is done with multiple CUDA threads within a same block. It is hard</span></div>
<div style="position:absolute;left:28.00px;top:372.04px" class="cls_004"><span class="cls_004">to achieve the non-preemptive priority scheduling as it is almost impossible to implement the lock</span></div>
<div style="position:absolute;left:28.00px;top:391.54px" class="cls_004"><span class="cls_004">for the CUDA threads within </span><span class="cls_003">the same block</span><span class="cls_004"> due to its wrap architecture. Therefore, the multiple</span></div>
<div style="position:absolute;left:28.00px;top:410.29px" class="cls_004"><span class="cls_004">processes rather run sequentially to simulate the non-preemptive priority scheduling to avoid the</span></div>
<div style="position:absolute;left:28.00px;top:429.04px" class="cls_004"><span class="cls_004">data complict in accessing the same inverted page table.</span></div>
<div style="position:absolute;left:28.00px;top:459.79px" class="cls_004"><span class="cls_004">The sequantial execution is achived by leveraging the CUDA</span></div>
<div style="position:absolute;left:358.35px;top:459.79px" class="cls_009"><span class="cls_009">__syncthreads() </span><span class="cls_004"> and a if condition.</span></div>
<div style="position:absolute;left:28.00px;top:490.54px" class="cls_004"><span class="cls_004">What's more, the pid is added to the head of the VM address to distinguish the addresses of</span></div>
<div style="position:absolute;left:28.00px;top:509.29px" class="cls_004"><span class="cls_004">diferent processes, and other implementation details stay consistent with the main part mentioned</span></div>
<div style="position:absolute;left:28.00px;top:528.04px" class="cls_004"><span class="cls_004">above.</span></div>
<div style="position:absolute;left:28.00px;top:565.54px" class="cls_006"><span class="cls_006">3. The results</span></div>
<div style="position:absolute;left:28.00px;top:614.29px" class="cls_008"><span class="cls_008">Single Process VM Simulation</span></div>
<div style="position:absolute;left:52.00px;top:649.54px" class="cls_004"><span class="cls_004">Page fault number: 8093</span></div>
<div style="position:absolute;left:52.00px;top:668.29px" class="cls_004"><span class="cls_004">Screenshots of result:</span></div>
<div style="position:absolute;left:198.99px;top:754.54px" class="cls_004"><span class="cls_004">Figure 1: Single Process Test Results</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:4250px;width:594px;height:840px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="readme_files/background6.jpg" width=594 height=840></div>
<div style="position:absolute;left:52.00px;top:34.54px" class="cls_004"><span class="cls_004">Analysis of the results:</span></div>
<div style="position:absolute;left:76.00px;top:53.29px" class="cls_004"><span class="cls_004">First of all, we invoke 4k page write to the fle, causing 4k page faults</span></div>
<div style="position:absolute;left:76.00px;top:72.04px" class="cls_004"><span class="cls_004">Then the following read function calls from 4k down will causes exactly 1 pagefaults.</span></div>
<div style="position:absolute;left:76.00px;top:90.79px" class="cls_004"><span class="cls_004">Finally the vm_read() calls in the snapshot will further generates 4k pagefaults.</span></div>
<div style="position:absolute;left:28.00px;top:125.29px" class="cls_008"><span class="cls_008">My User Program</span></div>
<div style="position:absolute;left:28.00px;top:160.54px" class="cls_004"><span class="cls_004">For required work:</span></div>
<div style="position:absolute;left:28.00px;top:204.04px" class="cls_002"><span class="cls_002">1</span></div>
<div style="position:absolute;left:48.44px;top:265.84px" class="cls_015"><span class="cls_015">for</span><span class="cls_012"> (</span><span class="cls_015">int</span><span class="cls_012"> i </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_016">0</span><span class="cls_012">; i </span><span class="cls_015">&lt;</span><span class="cls_012"> input_size; i</span><span class="cls_015">++</span><span class="cls_012">)</span></div>
<div style="position:absolute;left:60.72px;top:280.09px" class="cls_011"><span class="cls_011">vm_write</span><span class="cls_012">(vm, i, input[i]);</span></div>
<div style="position:absolute;left:48.44px;top:308.59px" class="cls_015"><span class="cls_015">for</span><span class="cls_012"> (</span><span class="cls_015">int</span><span class="cls_012"> i </span><span class="cls_015">=</span><span class="cls_012"> input_size </span><span class="cls_015">-</span><span class="cls_012"> </span><span class="cls_016">1</span><span class="cls_012">; i </span><span class="cls_015">>=</span><span class="cls_012"> input_size </span><span class="cls_015">-</span><span class="cls_012"> </span><span class="cls_016">32769</span><span class="cls_012">; i</span><span class="cls_015">--</span><span class="cls_012">)</span></div>
<div style="position:absolute;left:60.72px;top:322.84px" class="cls_015"><span class="cls_015">int</span><span class="cls_012"> value </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_011">vm_read</span><span class="cls_012">(vm, i);</span></div>
<div style="position:absolute;left:36.16px;top:351.34px" class="cls_011"><span class="cls_011">vm_snapshot</span><span class="cls_012">(vm, results, </span><span class="cls_016">0</span><span class="cls_012">, input_size);</span></div>
<div style="position:absolute;left:28.00px;top:387.04px" class="cls_004"><span class="cls_004">PF: 8193</span></div>
<div style="position:absolute;left:28.00px;top:430.54px" class="cls_002"><span class="cls_002">2</span></div>
<div style="position:absolute;left:36.16px;top:491.59px" class="cls_015"><span class="cls_015">for</span><span class="cls_012"> (</span><span class="cls_015">int</span><span class="cls_012"> i </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_016">0</span><span class="cls_012">; i </span><span class="cls_015">&lt;</span><span class="cls_012"> input_size; i</span><span class="cls_015">++</span><span class="cls_012">)</span></div>
<div style="position:absolute;left:60.72px;top:505.84px" class="cls_015"><span class="cls_015">if</span><span class="cls_012">(i</span><span class="cls_015">%</span><span class="cls_016">2</span><span class="cls_012">) </span><span class="cls_011">vm_write</span><span class="cls_012">(vm, i, input[i]);</span></div>
<div style="position:absolute;left:48.44px;top:534.34px" class="cls_015"><span class="cls_015">for</span><span class="cls_012"> (</span><span class="cls_015">int</span><span class="cls_012"> i </span><span class="cls_015">=</span><span class="cls_012"> input_size </span><span class="cls_015">-</span><span class="cls_012"> </span><span class="cls_016">1</span><span class="cls_012">; i </span><span class="cls_015">>=</span><span class="cls_012"> input_size </span><span class="cls_015">-</span><span class="cls_012"> </span><span class="cls_016">32769</span><span class="cls_012">; i</span><span class="cls_015">--</span><span class="cls_012">)</span></div>
<div style="position:absolute;left:60.72px;top:548.59px" class="cls_015"><span class="cls_015">if</span><span class="cls_012">(i</span><span class="cls_015">%</span><span class="cls_016">2</span><span class="cls_012">) </span><span class="cls_015">int</span><span class="cls_012"> value </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_011">vm_read</span><span class="cls_012">(vm, i);</span></div>
<div style="position:absolute;left:48.44px;top:577.09px" class="cls_015"><span class="cls_015">for</span><span class="cls_012"> (</span><span class="cls_015">int</span><span class="cls_012"> i </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_016">0</span><span class="cls_012">; i </span><span class="cls_015">&lt;</span><span class="cls_012"> input_size; i</span><span class="cls_015">++</span><span class="cls_012">)</span></div>
<div style="position:absolute;left:60.72px;top:591.34px" class="cls_015"><span class="cls_015">if</span><span class="cls_012">(i</span><span class="cls_015">%</span><span class="cls_016">2</span><span class="cls_015">==</span><span class="cls_016">0</span><span class="cls_012">) </span><span class="cls_011">vm_write</span><span class="cls_012">(vm, i, input[i]);</span></div>
<div style="position:absolute;left:36.16px;top:619.84px" class="cls_011"><span class="cls_011">vm_snapshot</span><span class="cls_012">(vm, results, </span><span class="cls_016">0</span><span class="cls_012">, input_size);</span></div>
<div style="position:absolute;left:28.00px;top:655.54px" class="cls_004"><span class="cls_004">PF: 12289</span></div>
<div style="position:absolute;left:28.00px;top:690.04px" class="cls_008"><span class="cls_008">Multiple Processes VM Simulation (bonus)</span></div>
<div style="position:absolute;left:52.00px;top:725.29px" class="cls_004"><span class="cls_004">Using the user program I provides, 32772 page faults are generated.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:5100px;width:594px;height:840px;border-style:outset;overflow:hidden">
<div style="position:absolute;left:0px;top:0px">
<img src="readme_files/background7.jpg" width=594 height=840></div>
<div style="position:absolute;left:48.44px;top:41.59px" class="cls_015"><span class="cls_015">for</span><span class="cls_012"> (</span><span class="cls_015">int</span><span class="cls_012"> i </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_016">0</span><span class="cls_012">; i </span><span class="cls_015">&lt;</span><span class="cls_012"> input_size; i</span><span class="cls_015">++</span><span class="cls_012">){</span></div>
<div style="position:absolute;left:60.72px;top:55.84px" class="cls_015"><span class="cls_015">if</span><span class="cls_012">(i</span><span class="cls_015">%</span><span class="cls_016">4</span><span class="cls_015">==</span><span class="cls_012">pid){</span></div>
<div style="position:absolute;left:85.28px;top:70.09px" class="cls_011"><span class="cls_011">vm_write</span><span class="cls_012">(vm, i, input[i],pid);</span></div>
<div style="position:absolute;left:60.72px;top:84.34px" class="cls_012"><span class="cls_012">}</span></div>
<div style="position:absolute;left:48.44px;top:98.59px" class="cls_012"><span class="cls_012">}</span></div>
<div style="position:absolute;left:48.44px;top:127.09px" class="cls_015"><span class="cls_015">for</span><span class="cls_012"> (</span><span class="cls_015">int</span><span class="cls_012"> i </span><span class="cls_015">=</span><span class="cls_012"> input_size </span><span class="cls_015">-</span><span class="cls_012"> </span><span class="cls_016">1</span><span class="cls_012">; i </span><span class="cls_015">>=</span><span class="cls_012"> input_size </span><span class="cls_015">-</span><span class="cls_012"> </span><span class="cls_016">32769</span><span class="cls_012">; i</span><span class="cls_015">--</span><span class="cls_012">)</span></div>
<div style="position:absolute;left:60.72px;top:141.34px" class="cls_015"><span class="cls_015">if</span><span class="cls_012">(i</span><span class="cls_015">%</span><span class="cls_016">4</span><span class="cls_015">==</span><span class="cls_012">pid) </span><span class="cls_015">int</span><span class="cls_012"> value </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_011">vm_read</span><span class="cls_012">(vm, i,pid);</span></div>
<div style="position:absolute;left:48.44px;top:169.84px" class="cls_015"><span class="cls_015">for</span><span class="cls_012">(u32 i </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_016">0</span><span class="cls_012">; i </span><span class="cls_015">&lt;</span><span class="cls_012"> input_size; i</span><span class="cls_015">++</span><span class="cls_012">) {</span></div>
<div style="position:absolute;left:60.72px;top:184.09px" class="cls_015"><span class="cls_015">if</span><span class="cls_012">(i</span><span class="cls_015">%</span><span class="cls_016">4</span><span class="cls_015">==</span><span class="cls_012">pid) results[i] </span><span class="cls_015">=</span><span class="cls_012"> </span><span class="cls_011">vm_read</span><span class="cls_012">(vm,i,pid);</span></div>
<div style="position:absolute;left:48.44px;top:198.34px" class="cls_012"><span class="cls_012">}</span></div>
<div style="position:absolute;left:48.44px;top:212.59px" class="cls_013"><span class="cls_013">//No snapshot is further needed</span></div>
<div style="position:absolute;left:28.00px;top:255.04px" class="cls_006"><span class="cls_006">4. What I learn from the project</span></div>
<div style="position:absolute;left:28.00px;top:300.04px" class="cls_004"><span class="cls_004">I learn the principles of paging memory management system and how to implememnt them. I also</span></div>
<div style="position:absolute;left:28.00px;top:318.79px" class="cls_004"><span class="cls_004">learn that the an replacement algorithm (for example, LRU we use in the project) is of great</span></div>
<div style="position:absolute;left:28.00px;top:337.54px" class="cls_004"><span class="cls_004">importance in a paging system, and the utilize the memory as much as possible.</span></div>
</div>

</body>
</html>
